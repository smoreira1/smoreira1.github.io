---
layout: ~/layouts/MainLayout.astro
title: D√©pannage
description: Besoin d'aide ? Bloqu√© sur quelque chose ? Ce guide est fait pour vous.
---

Astro fournit plusieurs outils diff√©rents pour vous aider √† d√©panner et √† d√©boguer votre code.

## Erreurs courantes

Voici une liste de quelques messages d'erreurs courants que vous pourriez rencontrer dans votre terminal, ce qu'ils signifient et ce que vous pouvez faire pour les corriger.

### Transform failed with X error

Ce message appara√Æt souvent √† cause d'une limitation actuelle dans Astro qui exige que vos appels `import` et `export` soient au d√©but de votre fichier `.astro`.

**Solution**: √âcrivez vos imports et exports au d√©but de votre Script de composant.

**Statut**: Limitation actuelle; Un correctif est en cours de d√©veloppement.

üí° Vous n'√™tes pas certain que cela va r√©soudre votre probl√®me ? V√©rifiez si quelqu'un d'autre a d√©j√† [signal√© ce type d'erreur](https://github.com/withastro/astro/issues?q=is%3Aissue+is%3Aopen+Transform+failed+with+*+error) !

### Cannot use import statement outside a module

Dans les composants Astro, les balises `<script>` sont hoist√©es et charg√©es comme des [modules JavaScript](https://developer.mozilla.org/fr/docs/Web/JavaScript/Guide/Modules) par d√©faut. Si vous avez ajout√© la directive [`is:inline`](/fr/reference/directives-reference/#isinline) ou n'importe quel autre attribut dans votre balise, ce comportement par d√©faut est d√©sactiv√©.

**Solution**: Si vous avez ajout√© n'importe quel attribut √† votre balise `<script>`, vous devez aussi ajouter la directive `type="module"` pour pouvoir utiliser les importations.

**Statut**: Comportement attendu par Astro, comme pr√©vu.

üí° Vous n'√™tes pas certain que cela va r√©soudre votre probl√®me ? V√©rifiez si quelqu'un d'autre a d√©j√† [signal√© ce type d'erreur](https://github.com/withastro/astro/issues?q=is%3Aissue+is%3Aopen+Cannot+use+import+statement) !

### Unable to render component

Cette erreur indique une erreur dans un composant que vous avez import√© et utilis√© dans votre Template de composant Astro.

#### Cas classiques

Ceci peut √™tre caus√© par l'acc√®s √† l'objet `window` ou `document` au moment de la g√©n√©ration du composant. Par d√©faut, Astro g√©n√®re votre composant [isomorphiquement](https://fr.wikipedia.org/wiki/Isomorphisme), c'est-√†-dire qu'il est ex√©cut√© sur le serveur o√π l'environnement du navigateur n'est pas disponible. Vous pouvez d√©sactiver cette √©tape de pr√©-g√©n√©ration en utilisant [la directive `client:only`](/fr/reference/directives-reference/#clientonly).

**Solution**: Essayez d'acc√©der √† ces objets apr√®s la g√©n√©ration du composant (ex: [`useEffect()`](https://fr.reactjs.org/docs/hooks-reference.html#useeffect) dans React ou [`onMounted()`](https://vuejs.org/api/composition-api-lifecycle.html#onmounted) dans Vue et Svelte)

**Statut**: Comportement attendu par Astro, comme pr√©vu.

#### Ce n'est pas √ßa ?

**Solution**: V√©rifiez la documentation appropri√©e pour votre composant [Astro](/fr/core-concepts/astro-components/) ou de [Framework UI](/fr/core-concepts/framework-components/). Vous pouvez aussi ouvrir un Template de d√©marrage Astro [astro.new](https://astro.new/) et d√©boguer votre composant dans un projet Astro minimal.

üí° Vous n'√™tes pas certain que cela va r√©soudre votre probl√®me ? V√©rifiez si quelqu'un d'autre a d√©j√† [signal√© ce type d'erreur](https://github.com/withastro/astro/issues?q=is%3Aissue+is%3Aopen+Unable+to+render+Component) !

### Expected a default export

Cette erreur peut √™tre lev√©e lorsque vous essayez d'importer ou de rendre un composant invalide, ou un qui ne fonctionne pas correctement. (Ce message d'erreur appara√Æt car le fonctionnement de l'importation d'un composant UI se fait d'une fa√ßon sp√©cifique √† Astro.)

**Solution**: Essayez de trouver des erreurs dans les composants que vous importez et affichez et assurez-vous qu'ils fonctionnent correctement. Vous pouvez aussi ouvrir un Template de d√©marrage Astro [astro.new](https://astro.new) et d√©boguer votre composant dans un projet Astro minimal.

**Statut**: Comportement attendu par Astro, comme pr√©vu.

## Pi√®ges courants

### Mon composant ne s'affiche pas

En premier lieu, v√©rifiez que vous avez **import√© le composant** dans votre [Script de composant `.astro`](/fr/core-concepts/astro-components/#le-script-du-composant) ou dans [le Frontmatter `.md`](/fr/guides/markdown-content/#utilisez-des-composants-dans-markdown).

Ensuite, v√©rifiez votre appel `import` :

- Votre importation dirige-t-elle vers le bon endroit ? (V√©rifiez votre chemin d'import.)

- Est-ce que votre importation a le m√™me nom que le composant import√© ? (V√©rifiez le nom de votre composant et que cela [suit la syntaxe `.astro`](/fr/comparing-astro-vs-other-tools/#astro-vs-jsx).)

- Avez-vous inclu l'extension dans l'importation ? (V√©rifiez que le fichier import√© contient une extension. Ex: `.astro`, `.md`, `.jsx`, `.vue`)

### Mon composant n'est pas interactif

Si votre composant est rendu (voir la pr√©c√©dente section) mais ne r√©pond pas √† l'interaction utilisateur, alors vous avez peut-√™tre oubli√© une [directive `client:*`](/fr/reference/directives-reference/#client-directives) pour hydrater votre composant.

Par d√©faut, un [composants UI de Framework n'est pas hydrat√© sur le navigateur](/fr/core-concepts/framework-components/#hydratation-des-composants-interactifs). Si aucune directive `client:*` n'est fournie, son HTML est rendu sur la page sans JavaScript.

Note : Les [composants Astro](/fr/core-concepts/astro-components/) sont des composants HTML sans ex√©cution sur le navigateur. Mais, vous pouvez utiliser une balise `<script>` dans votre Template de composant Astro pour envoyer du JavaScript au navigateur qui s'ex√©cute globalement sur toute la page.

### Cannot find package 'X'

Allez jeter un oeil au [guide pour les int√©grations Astro](/fr/guides/integrations-guide/) pour les instructions sur l'ajout de Framework, des outils CSS et d'autres Packages vers Astro.

Vous pourriez aussi avoir besoin d'installer des _"peer dependencies"_ pour certaines int√©grations. Si vous voyez un message ¬´ missing peer dependencies ¬ª, vous pouvez suivre les instructions afin de [g√©rer les d√©pendances](/fr/guides/integrations-guide/#g√©rer-les-d√©pendances-dint√©gration).

### `Astro.glob()` - no matches found

Quant vous utilisez `Astro.glob()` pour importer des fichiers, assurez-vous d'utiliser la syntaxe glob correcte qui va correspondre √† tous les fichiers dont vous auriez besoin.

#### Chemins d'acc√®s

Par exemple, utilisez `../components/**/*.js` dans `src/pages/index.astro` pour importer les deux fichiers suivants :

- `src/components/MyComponent.js`
- `src/components/includes/MyOtherComponent.js`

#### Valeurs prises en charge

`Astro.glob()` ne prend pas en charge les variables dynamiques et les interpolations.

Ce n'est pas un bug d'Astro. C'est d√ª √† une limitation de la fonctionnalit√© [`import.meta.glob()` de Vite](https://vitejs.dev/guide/features.html#glob-import) qui ne supporte que des cha√Ænes de caract√®res statiques.

L'alternative la plus courante est d'importer un ensemble plus grand de fichiers qui inclut tous les fichiers dont vous avez besoin en utilisant `Astro.glob()`, puis de les filtrer :

```astro
---
// src/components/featured.astro
const { postSlug } = Astro.props
const pathToMyFeaturedPost = `src/pages/blog/${postSlug}.md`

const posts = await Astro.glob('../pages/blog/*.md');
const myFeaturedPost = posts.find(post => post.file.includes(pathToMyFeaturedPost));
---

<p>
    Jetez un oeil √† mon article favori, <a href={myFeaturedPost.url}>{myFeaturedPost.frontmatter.title}</a> !
</p>
```

### Utilisation d'Astro avec Yarn 2+ (Berry)

Dans Yarn version 2 ou plus (a.k.a. Berry), utilise une technique appel√©e ["Plug'n'Play" (PnP)](https://yarnpkg.com/features/pnp) pour stocker et g√©rer les modules Node, qui peut [causer des probl√®mes](https://github.com/withastro/astro/issues/3450) lors de l'initialisation d'un nouveau projet Astro utilisant `create-astro` ou lors de l'utilisation de Astro. Une solution est de d√©finir la propri√©t√© [`nodeLinker`](https://yarnpkg.com/configuration/yarnrc#nodeLinker) dans `yarnrc.yml` √† la valeur `node-modules` :

```yaml
nodeLinker: "node-modules"
```

## Trucs et astuces

### D√©bogage avec `console.log()`

`console.log()` est un moyen simple mais populaire de d√©boguer votre code Astro. Lorsque vous √©crivez votre appel √† `console.log`, il d√©terminera o√π votre sortie de d√©bogage sera affich√©e.

#### Frontmatter

Un appel √† `console.log()` dans le Frontmatter d'Astro sera toujours sorti dans le **terminal** qui ex√©cute le processus d'Astro. Car Astro s'ex√©cute sur le serveur, et jamais dans le navigateur.

```astro
---
const sum = (a, b) => a + b;

// Exemple : Affiche "4" dans le terminal
console.log(sum(2, 2));
---
```

#### Scripts JS

Le code qui est √©crit ou import√© dans un `<script>` d'Astro sera ex√©cut√© dans le navigateur. Toutes les sorties de d√©bogage ou autres appels √† `console.log()` seront affich√©s dans votre navigateur.

### D√©bogage des composants de Framework

[Les composants de Framework](/fr/core-concepts/framework-components/) (comme React et Svelte) sont uniques : ils sont rendus sur le serveur par d√©faut, ce qui signifie que les sorties de d√©bogage seront visibles dans le terminal. Cependant, ils peuvent √©galement √™tre hydrat√©s pour le navigateur, ce qui peut aussi entra√Æner que vos logs de d√©bogage apparaissent √©galement dans le navigateur.

Cela peut √™tre utile pour d√©boguer les diff√©rences entre la sortie SSR et les composants hydrat√©s dans le navigateur.

### Le composant `<Debug />` d'Astro

Pour vous aider √† d√©boguer vos composants Astro, Astro propose un composant [`<Debug />`](/fr/reference/api-reference/#debug-) qui affiche directement une valeur dans votre template HTML de composant. Cela est utile pour un d√©bogage rapide dans le navigateur sans avoir √† faire les aller-retour entre votre terminal et votre navigateur.

```astro
---
import { Debug } from 'astro/components';
const sum = (a, b) => a + b;
---

<!-- Exemple : Affiche {answer: 6} dans le navigateur -->
<Debug answer={sum(2, 4)} />
```

Le composant `<Debug />` d'Astro supporte une vari√©t√© d'options de syntaxe pour un d√©bogage plus flexible et concis :

```astro
---
import { Debug } from 'astro/components';
const sum = (a, b) => a + b;
const answer = sum(2, 4);
---
<!-- Exemple : Les trois exemples sont √©quivalents. -->
<Debug answer={sum(2, 4)} />
<Debug {{answer: sum(2, 4)}} />
<Debug {answer} />
```

## Besoin de plus ?

Venez discuter avec nous sur [Discord](https://astro.build/chat/) et expliquez votre probl√®me dans le salon `#support-threads`. Nous sommes toujours heureux de pouvoir vous aider !

Visitez les [_"Issues"_ GitHub ouvertes dans Astro](https://github.com/withastro/astro/issues/) pour voir si vous rencontrez un probl√®me connu ou soumettre un rapport de bug.

Vous pouvez aussi visiter [les discussions RFC](https://github.com/withastro/rfcs/discussions/) pour voir si vous avez trouv√© une limitation connue d'Astro et regarder si il y a des propositions en rapport avec votre utilisation.
